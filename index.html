<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=33bbccb4db936c57c67284972c23ac5bc478112e">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Pyenv-Mirror: the pyenv’s unofficial Python archives mirror | pyenv-mirror</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Pyenv-Mirror: the pyenv’s unofficial Python archives mirror" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Pyenv Mirror" />
<meta property="og:description" content="Pyenv Mirror" />
<meta property="og:site_name" content="pyenv-mirror" />
<script type="application/ld+json">
{"headline":"Pyenv-Mirror: the pyenv’s unofficial Python archives mirror","description":"Pyenv Mirror","@type":"WebSite","name":"pyenv-mirror","url":"/","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/S0urceC0der/pyenv-mirror">View on GitHub</a>

          <h1 id="project_title">pyenv-mirror</h1>
          <h2 id="project_tagline">Pyenv Mirror</h2>

          
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>Pyenv-Mirror: the pyenv's unofficial Python archives mirror</h1>

<p>Pyenv is a simple and powerfull python version and environment management tool. Unfortuanlly python source files download speed is very slow in china during the installion of python with pyenv, so I create this mirror to speedup the download. </p>

<h2>Usage</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
export PYTHON_BUILD_MIRROR_URL="https://pyenv-mirror.now.sh/api/pythons?"
</code></pre></div></div>

<h2>Detail</h2>

<h3>Mirror List</h3>

<table>
<thead>
<tr>
  <th>Origin</th>
  <th>Mirror</th>
</tr>
</thead>
<tbody>
<tr>
  <td>https://www.python.org/ftp/python/</td>
  <td>https://npm.taobao.org/mirrors/python/</td>
</tr>
<tr>
  <td>https://ftpmirror.gnu.org/</td>
  <td>https://mirrors.ustc.edu.cn/gnu/</td>
</tr>
</tbody>
</table>

<h3>Deploy</h3>

<p>This site is deployed on <a href="https://zeit.co/home">Now.sh</a>.</p>

<h3>Url Route</h3>

<p>Pyenv download url is <code>${PYTHON_BUILD_MIRROR_URL}/$checksum</code>, and will redirect to <code>/api/pythons?/$checksum</code>. So all the request url can be handled to the python serverless function file <code>/api/pythons.py</code>.</p>

<h3>Build Your Own Site</h3>

<ol>
<li>Glone this repository to local.</li>
<li>Run <code>python build.py</code> to build local database to <code>/local/database.json</code>.</li>
<li>run <code>now .</code> to deploy to now.sh platform and define the alias domain.</li>
</ol>

<h2>TODO</h2>

<p>Some urls may still slow:</p>

<ul>
<li>pypi.python.org</li>
<li>www.openssl.org</li>
<li>www.stackless.com</li>
<li>bitbucket.org</li>
</ul>

<h2>Thanks</h2>

<p>Thanks to all the mirror and service provider.</p>

<h2>History</h2>

<p>Update at 2023-03-29.</p>

<p>Report <a href="https://github.com/S0urceC0der/pyenv-mirror/issues/new">Issue</a> if new python is not avaliable.</p>

<h1>中文文档</h1>

<p>pyenv 是一个强大的 Python 版本和虚拟环境管理工具，但是在国内使用时会经常遇到下载 Python 源码包速度特别慢的问题。虽然之前有一个镜像地址可以提高速度，但是该镜像的 Python 版本长久未更新缺少很多新版源码，因此使用了一个新的方式来实现镜像加速功能。</p>

<h2>使用方法</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
export PYTHON_BUILD_MIRROR_URL="https://pyenv-mirror.now.sh/api/pythons?"
</code></pre></div></div>

<h2>实现流程</h2>

<h3>镜像方案</h3>

<table>
<thead>
<tr>
  <th>原始 URL</th>
  <th>镜像 URL</th>
</tr>
</thead>
<tbody>
<tr>
  <td>https://www.python.org/ftp/python/</td>
  <td>https://npm.taobao.org/mirrors/python/</td>
</tr>
<tr>
  <td>https://ftpmirror.gnu.org/</td>
  <td>https://mirrors.ustc.edu.cn/gnu/</td>
</tr>
</tbody>
</table>

<h3>部署环境</h3>

<p>镜像网站托管在了<a href="https://zeit.co/home">Now.sh</a>上，利用了该网站提供的免费资源，因为整个过程只存在跳转信息，因此应该能够长久使用。</p>

<h3>网站路由</h3>

<p>Pyenv 的下载地址内容为 <code>${PYTHON_BUILD_MIRROR_URL}/$checksum</code>，而 Now.sh 的 Serverless 函数只能一个文件对应一个路由，因此将该网址路由为 <code>/api/pythons?/$checksum</code>，使得所有的请求都能由 <code>/api/pythons.py</code> 负责处理，这也是为什么 PYTHON<em>BUILD</em>MIRROR_URL 内容的最后一个 <code>?</code> 是必须的。</p>

<h3>自建流程</h3>

<ol>
<li>克隆本仓库</li>
<li>运行 <code>python buid.py</code> 会自动下载 pyenv 仓库并提取其中的源码网址，生成跳转数据库 <code>/api/database.json</code></li>
<li>运行 <code>now .</code> 接部署到 Now.sh 并自定义域名方便访问。</li>
</ol>

<h2>TODO</h2>

<p>仍然有一些可能下载速度慢的域名还需要处理：</p>

<ul>
<li>pypi.python.org</li>
<li>www.openssl.org</li>
<li>www.stackless.com</li>
<li>bitbucket.org</li>
</ul>

<h2>致谢</h2>

<p>感谢提供国内镜像的各大网站</p>

<h2>更新历史</h2>

<p>2023-03-29 更新</p>

<p>如果有文件没有被镜像而下载过慢，请提<a href="https://github.com/S0urceC0der/pyenv-mirror/issues/new">Issue</a>。</p>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        
        <p class="copyright">pyenv-mirror maintained by <a href="https://github.com/S0urceC0der">S0urceC0der</a></p>
        
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    
  </body>
</html>
